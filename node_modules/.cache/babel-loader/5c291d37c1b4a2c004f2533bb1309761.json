{"ast":null,"code":"var _jsxFileName = \"/Users/raghavsethi/Desktop/webspring/src/components/apps/tindawg/swiper.js\";\nimport React, { useMemo, useState } from \"react\";\nimport TinderCard from \"react-tinder-card\";\nimport { useSequentialSelections } from \"../map-view/utils\";\nimport { ImCross } from \"react-icons/im\";\nimport { IoHeartSharp } from \"react-icons/io5\";\nimport { FaUndoAlt } from \"react-icons/fa\";\nimport { IconContext } from \"react-icons\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { CardContainer, Card, ButtonsContainer, ActionButton, SwiperContainer, EmptyCard } from \"./swiper.styles\";\nconst db = [{\n  name: \"Duke\",\n  url: \"/tindawg_pets/06_dog.jpg\"\n}, {\n  name: \"Pupcake\",\n  url: \"/tindawg_pets/05_dog.jpg\"\n}, {\n  name: \"Sphinx\",\n  url: \"/tindawg_pets/04_cat.jpg\"\n}, {\n  name: \"Croissant\",\n  url: \"/tindawg_pets/03_cat.jpg\"\n}, {\n  name: \"Fido\",\n  url: \"/tindawg_pets/02_dog.jpg\"\n}, {\n  name: \"Biscuit\",\n  url: \"/tindawg_pets/01_cat.jpg\"\n}];\nconst expectedSequence = [\"left\", \"right\", \"left\", \"left\", \"right\", \"right\"];\nexport default function TindawgSwiper({\n  onSuccess = () => null\n}) {\n  const [characters, setCharacters] = useState([]);\n  const [removedCharacters, setRemovedCharacters] = useState([]);\n  const [sequence, addToSequence] = useSequentialSelections(expectedSequence);\n\n  const reset = () => {\n    addToSequence(null);\n    setCharacters(db);\n    setRemovedCharacters([]);\n  };\n\n  React.useEffect(() => {\n    reset();\n  }, []);\n  const childRefs = useMemo(() => characters.reduce((acc, curr) => {\n    acc[curr.name] = React.createRef();\n    return acc;\n  }, {}), [characters]);\n  const swiped = React.useCallback((direction, nameToDelete) => {\n    addToSequence(direction);\n    setRemovedCharacters(prevState => [...prevState, nameToDelete]);\n  }, [setRemovedCharacters, characters]);\n  const outOfFrame = React.useCallback(name => {\n    console.log(name + \" left the screen!\");\n    setCharacters(prevState => prevState.filter(character => character.name !== name));\n  }, [setCharacters, characters]);\n  const swipe = React.useCallback(dir => {\n    const cardsLeft = characters.filter(person => !removedCharacters.includes(person.name));\n\n    if (cardsLeft.length) {\n      const toBeRemoved = cardsLeft[cardsLeft.length - 1].name; // Find the card object to be removed\n\n      setRemovedCharacters(prevState => [...prevState, toBeRemoved]); // Make sure the next card gets removed next time if this card do not have time to exit the screen\n\n      if (childRefs[toBeRemoved] && childRefs[toBeRemoved].current) {\n        childRefs[toBeRemoved].current.swipe(dir); // Swipe the card!\n      }\n    }\n  }, [characters, setRemovedCharacters, removedCharacters, db]);\n  React.useEffect(() => {\n    if (sequence.length === expectedSequence.length) {\n      onSuccess();\n    }\n  }, [sequence]);\n  return /*#__PURE__*/React.createElement(SwiperContainer, null, /*#__PURE__*/React.createElement(CardContainer, {\n    isEmpty: characters.length > 0\n  }, characters.length > 0 ? characters.map((character, index) => /*#__PURE__*/React.createElement(TinderCard, {\n    ref: childRefs[character.name],\n    className: \"swipe\",\n    key: character.name,\n    onSwipe: dir => swiped(dir, character.name),\n    onCardLeftScreen: () => outOfFrame(character.name)\n  }, /*#__PURE__*/React.createElement(Card, {\n    style: {\n      backgroundImage: \"url(\" + character.url + \")\"\n    },\n    className: \"card\"\n  }, /*#__PURE__*/React.createElement(\"h3\", null, character.name)))) : /*#__PURE__*/React.createElement(AnimatePresence, null, /*#__PURE__*/React.createElement(EmptyCard, {\n    initial: {\n      opacity: 0,\n      scale: 0.3\n    },\n    animate: {\n      opacity: 1,\n      scale: 1\n    },\n    exit: {\n      opacity: 0,\n      scale: 0\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/icons/tindawg_alpha.png\"\n  }), /*#__PURE__*/React.createElement(\"p\", null, \"Can't sniff out any matches? Try standing out from the background!\")))), /*#__PURE__*/React.createElement(ButtonsContainer, null, /*#__PURE__*/React.createElement(IconContext.Provider, {\n    value: {\n      color: \"#F63654\"\n    }\n  }, /*#__PURE__*/React.createElement(ActionButton, {\n    onClick: () => swipe(\"left\"),\n    disabled: characters.length === 0\n  }, /*#__PURE__*/React.createElement(ImCross, null))), /*#__PURE__*/React.createElement(IconContext.Provider, {\n    value: {\n      color: \"#F8B10D\"\n    }\n  }, /*#__PURE__*/React.createElement(ActionButton, {\n    onClick: () => reset()\n  }, /*#__PURE__*/React.createElement(FaUndoAlt, null))), /*#__PURE__*/React.createElement(IconContext.Provider, {\n    value: {\n      color: \"#30E5A5\"\n    }\n  }, /*#__PURE__*/React.createElement(ActionButton, {\n    onClick: () => swipe(\"right\"),\n    disabled: characters.length === 0\n  }, /*#__PURE__*/React.createElement(IoHeartSharp, null)))));\n}","map":{"version":3,"sources":["/Users/raghavsethi/Desktop/webspring/src/components/apps/tindawg/swiper.js"],"names":["React","useMemo","useState","TinderCard","useSequentialSelections","ImCross","IoHeartSharp","FaUndoAlt","IconContext","AnimatePresence","CardContainer","Card","ButtonsContainer","ActionButton","SwiperContainer","EmptyCard","db","name","url","expectedSequence","TindawgSwiper","onSuccess","characters","setCharacters","removedCharacters","setRemovedCharacters","sequence","addToSequence","reset","useEffect","childRefs","reduce","acc","curr","createRef","swiped","useCallback","direction","nameToDelete","prevState","outOfFrame","console","log","filter","character","swipe","dir","cardsLeft","person","includes","length","toBeRemoved","current","map","index","backgroundImage","opacity","scale","color"],"mappings":"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","sourcesContent":["import React, { useMemo, useState } from \"react\";\nimport TinderCard from \"react-tinder-card\";\nimport { useSequentialSelections } from \"../map-view/utils\";\nimport { ImCross } from \"react-icons/im\";\nimport { IoHeartSharp } from \"react-icons/io5\";\nimport { FaUndoAlt } from \"react-icons/fa\";\nimport { IconContext } from \"react-icons\";\nimport { AnimatePresence } from \"framer-motion\";\nimport {\n  CardContainer,\n  Card,\n  ButtonsContainer,\n  ActionButton,\n  SwiperContainer,\n  EmptyCard,\n} from \"./swiper.styles\";\n\nconst db = [\n  {\n    name: \"Duke\",\n    url: \"/tindawg_pets/06_dog.jpg\",\n  },\n  {\n    name: \"Pupcake\",\n    url: \"/tindawg_pets/05_dog.jpg\",\n  },\n  {\n    name: \"Sphinx\",\n    url: \"/tindawg_pets/04_cat.jpg\",\n  },\n  {\n    name: \"Croissant\",\n    url: \"/tindawg_pets/03_cat.jpg\",\n  },\n  {\n    name: \"Fido\",\n    url: \"/tindawg_pets/02_dog.jpg\",\n  },\n  {\n    name: \"Biscuit\",\n    url: \"/tindawg_pets/01_cat.jpg\",\n  },\n];\n\nconst expectedSequence = [\"left\", \"right\", \"left\", \"left\", \"right\", \"right\"];\n\nexport default function TindawgSwiper({ onSuccess = () => null }) {\n  const [characters, setCharacters] = useState([]);\n  const [removedCharacters, setRemovedCharacters] = useState([]);\n  const [sequence, addToSequence] = useSequentialSelections(expectedSequence);\n\n  const reset = () => {\n    addToSequence(null);\n    setCharacters(db);\n    setRemovedCharacters([]);\n  };\n\n  React.useEffect(() => {\n    reset();\n  }, []);\n\n  const childRefs = useMemo(\n    () =>\n      characters.reduce((acc, curr) => {\n        acc[curr.name] = React.createRef();\n        return acc;\n      }, {}),\n    [characters]\n  );\n\n  const swiped = React.useCallback(\n    (direction, nameToDelete) => {\n      addToSequence(direction);\n\n      setRemovedCharacters((prevState) => [...prevState, nameToDelete]);\n    },\n    [setRemovedCharacters, characters]\n  );\n\n  const outOfFrame = React.useCallback(\n    (name) => {\n      console.log(name + \" left the screen!\");\n      setCharacters((prevState) =>\n        prevState.filter((character) => character.name !== name)\n      );\n    },\n    [setCharacters, characters]\n  );\n\n  const swipe = React.useCallback(\n    (dir) => {\n      const cardsLeft = characters.filter(\n        (person) => !removedCharacters.includes(person.name)\n      );\n      if (cardsLeft.length) {\n        const toBeRemoved = cardsLeft[cardsLeft.length - 1].name; // Find the card object to be removed\n        setRemovedCharacters((prevState) => [...prevState, toBeRemoved]);\n        // Make sure the next card gets removed next time if this card do not have time to exit the screen\n\n        if (childRefs[toBeRemoved] && childRefs[toBeRemoved].current) {\n          childRefs[toBeRemoved].current.swipe(dir); // Swipe the card!\n        }\n      }\n    },\n    [characters, setRemovedCharacters, removedCharacters, db]\n  );\n\n  React.useEffect(() => {\n    if (sequence.length === expectedSequence.length) {\n      onSuccess();\n    }\n  }, [sequence]);\n\n  return (\n    <SwiperContainer>\n      <CardContainer isEmpty={characters.length > 0}>\n        {characters.length > 0 ? (\n          characters.map((character, index) => (\n            <TinderCard\n              ref={childRefs[character.name]}\n              className=\"swipe\"\n              key={character.name}\n              onSwipe={(dir) => swiped(dir, character.name)}\n              onCardLeftScreen={() => outOfFrame(character.name)}\n            >\n              <Card\n                style={{\n                  backgroundImage: \"url(\" + character.url + \")\",\n                }}\n                className=\"card\"\n              >\n                <h3>{character.name}</h3>\n              </Card>\n            </TinderCard>\n          ))\n        ) : (\n          <AnimatePresence>\n            <EmptyCard\n              initial={{ opacity: 0, scale: 0.3 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0 }}\n            >\n              <img src=\"/icons/tindawg_alpha.png\" />\n              <p>\n                Can't sniff out any matches? Try standing out from the\n                background!\n              </p>\n            </EmptyCard>\n          </AnimatePresence>\n        )}\n      </CardContainer>\n      <ButtonsContainer>\n        <IconContext.Provider value={{ color: \"#F63654\" }}>\n          <ActionButton\n            onClick={() => swipe(\"left\")}\n            disabled={characters.length === 0}\n          >\n            <ImCross />\n          </ActionButton>\n        </IconContext.Provider>\n        <IconContext.Provider value={{ color: \"#F8B10D\" }}>\n          <ActionButton onClick={() => reset()}>\n            <FaUndoAlt />\n          </ActionButton>\n        </IconContext.Provider>\n        <IconContext.Provider value={{ color: \"#30E5A5\" }}>\n          <ActionButton\n            onClick={() => swipe(\"right\")}\n            disabled={characters.length === 0}\n          >\n            <IoHeartSharp />\n          </ActionButton>\n        </IconContext.Provider>\n      </ButtonsContainer>\n    </SwiperContainer>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}