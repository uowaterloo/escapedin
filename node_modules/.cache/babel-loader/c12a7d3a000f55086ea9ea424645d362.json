{"ast":null,"code":"var _jsxFileName = \"/Users/raghavsethi/Desktop/mappedin/software/webspring/src/components/phone-view.js\";\nimport React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport StatusBar from \"./ui/statusbar\";\nimport { motion, useAnimation } from \"framer-motion\";\nimport { ImPhone, ImPhoneHangUp } from \"react-icons/im\";\nimport { RiDeleteBack2Line } from \"react-icons/ri\";\nconst Wrapper = styled(motion.div)`\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  backdrop-filter: blur(8px) contrast(1.5) brightness(0.6);\n  z-index: 1;\n  color: black;\n  opacity: 0;\n  position: relative;\n`;\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  max-width: 100%;\n  align-items: center;\n  position: relative;\n  max-width: 100%;\n  min-height: 0;\n  overflow: hidden;\n  cursor: pointer;\n  padding-top: 35px;\n\n  & > img {\n    overflow: hidden;\n    object-fit: contain;\n    width: 5vh;\n    border-radius: 50%;\n    max-width: 50px;\n    max-height: 50px;\n  }\n\n`;\nconst CancelButton = styled.img`\n\n  margin-left: 19px;\n\n`;\nconst PasscodeInputWrapper = styled.div`\n  display: grid;\n  margin: 0 20%;\n\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-auto-rows: 1fr;\n  grid-row-gap: 5%;\n  grid-column-gap: 10%;\n\n  & > button {\n    background-color: lightgrey;\n    backdrop-filter: brightness(2);\n    border: none;\n    color: black;\n    border-radius: 50%;\n    align-self: center;\n    justify-self: center;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n    user-select: none;\n\n    :nth-child(2) {\n      grid-row: 1;\n      grid-column: 1;\n    }\n\n    :hover {\n      backdrop-filter: brightness(2.5) opacity(0.5);\n    }\n\n    :focus {\n      outline: none;\n      border: none;\n    }\n  }\n\n  & > .phoneIcon {\n    background: limegreen;\n  }\n\n  & > .hangUpIcon {\n    background: orangered;\n  }\n\n  & > .deleteButton {\n    background-image: url(./icons/cancel_button.png);\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: 100%;\n    background-color: transparent;\n  }\n\n  & > .clearButton {\n    background: transparent;\n  }\n`;\nconst PhoneInputView = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-width: 100%;\n  align-items: center;\n  position: relative;\n  max-width: 100%;\n  min-height: 100px;\n  overflow: hidden;\n  cursor: pointer;\n  justify-content: center;\n`;\n\nfunction sound(src, loop = false) {\n  this.sound = document.createElement(\"audio\");\n  this.sound.src = src;\n  this.sound.setAttribute(\"preload\", \"auto\");\n  this.sound.setAttribute(\"controls\", \"none\");\n  this.sound.style.display = \"none\";\n  this.sound.loop = loop;\n  document.body.appendChild(this.sound);\n\n  this.play = function () {\n    this.sound.play();\n  };\n\n  this.stop = function () {\n    this.sound.pause();\n  };\n}\n\nvar phoneTimeout;\nvar phoneInterval;\nconst phoneDial = new sound(\"./audio/phone_dial.mp3\");\nconst morseCode = new sound(\"./audio/morse_code.wav\", true);\nvar timer = 0;\nexport default function PhoneView(props) {\n  const [inputValue, setInputValue] = useState(\"\");\n  const [callStatus, setCallStatus] = useState(\"\");\n  const [isCalling, setIsCalling] = useState(false);\n  const [callSucceeded, setCallSucceeded] = useState(false);\n  React.useEffect(() => {\n    return () => {\n      hangUp();\n    };\n  }, [props.current]);\n\n  const handlePhoneInput = (event, char) => {\n    event.stopPropagation();\n    event.preventDefault();\n    setCallStatus(\"\");\n    setInputValue(prevVal => {\n      if (prevVal.length == 12) {\n        return prevVal;\n      }\n\n      if (prevVal.length == 3 || prevVal.length == 7) {\n        prevVal += \"-\";\n      }\n\n      console.log(char);\n      return prevVal + char.toString();\n    });\n  };\n\n  const deletePhoneInput = () => {\n    setCallStatus(\"\");\n    setInputValue(prevVal => {\n      return prevVal.slice(0, -1);\n    });\n  };\n\n  const successfulCall = () => {\n    setCallSucceeded(true);\n    morseCode.play();\n    incrementTimer();\n    phoneInterval = setInterval(incrementTimer, 1000);\n  };\n\n  const incrementTimer = () => {\n    var minutes = Math.floor(timer / 60);\n    var seconds = timer % 60;\n    var minutesString = \"\";\n    var secondsString = \"\";\n\n    if (minutes < 10) {\n      minutesString = \"0\";\n    }\n\n    minutesString += minutes;\n\n    if (seconds < 10) {\n      secondsString = \"0\";\n    }\n\n    secondsString += seconds;\n    setCallStatus(minutesString + \":\" + secondsString);\n    timer += 1;\n  };\n\n  const hangUp = () => {\n    setCallSucceeded(false);\n    setIsCalling(false);\n    clearInterval(phoneInterval);\n    clearTimeout(phoneTimeout);\n    setCallStatus(\"Call ended\");\n    timer = 0; //stop all audio files\n\n    phoneDial.stop();\n    morseCode.stop();\n    console.log(\"hanging up\");\n  };\n\n  const call = () => {\n    phoneDial.stop();\n    phoneDial.play();\n    clearTimeout(phoneTimeout);\n    setCallStatus(\"Calling...\");\n    setIsCalling(true);\n    phoneTimeout = setTimeout(function () {\n      phoneDial.stop();\n\n      if (inputValue == \"519-745-2222\") {\n        //number called\n        successfulCall();\n      } else {\n        setCallStatus(\"Call failed\");\n        setIsCalling(false);\n      }\n    }, 6000);\n  };\n\n  const phoneInputs = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '*', '0', '#'];\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    initial: {\n      scale: 0,\n      opacity: 0\n    },\n    animate: {\n      scale: 1,\n      opacity: 1\n    },\n    exit: {\n      scale: 0,\n      opacity: 0\n    },\n    key: \"map-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(StatusBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(PhoneInputView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }\n  }, inputValue), /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 9\n    }\n  }, callStatus)), /*#__PURE__*/React.createElement(PasscodeInputWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      gridRow: \"1\",\n      gridColumn: \"1\",\n      width: 0,\n      paddingBottom: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }\n  }), phoneInputs.map((e, i) => /*#__PURE__*/React.createElement(\"button\", {\n    key: i,\n    onClick: event => {\n      handlePhoneInput(event, phoneInputs[i]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 11\n    }\n  }, phoneInputs[i])), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"clearButton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }\n  }), !isCalling && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"phoneIcon\",\n    onClick: () => {\n      call();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(ImPhone, {\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 75\n    }\n  })), isCalling && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"hangUpIcon\",\n    onClick: () => {\n      hangUp();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ImPhoneHangUp, {\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 77\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"deleteButton\",\n    onClick: () => {\n      deletePhoneInput();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/raghavsethi/Desktop/mappedin/software/webspring/src/components/phone-view.js"],"names":["React","useState","useContext","styled","StatusBar","motion","useAnimation","ImPhone","ImPhoneHangUp","RiDeleteBack2Line","Wrapper","div","Container","CancelButton","img","PasscodeInputWrapper","PhoneInputView","sound","src","loop","document","createElement","setAttribute","style","display","body","appendChild","play","stop","pause","phoneTimeout","phoneInterval","phoneDial","morseCode","timer","PhoneView","props","inputValue","setInputValue","callStatus","setCallStatus","isCalling","setIsCalling","callSucceeded","setCallSucceeded","useEffect","hangUp","current","handlePhoneInput","event","char","stopPropagation","preventDefault","prevVal","length","console","log","toString","deletePhoneInput","slice","successfulCall","incrementTimer","setInterval","minutes","Math","floor","seconds","minutesString","secondsString","clearInterval","clearTimeout","call","setTimeout","phoneInputs","scale","opacity","gridRow","gridColumn","width","paddingBottom","map","e","i"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport StatusBar from \"./ui/statusbar\";\nimport { motion, useAnimation } from \"framer-motion\";\nimport { ImPhone, ImPhoneHangUp } from \"react-icons/im\";\nimport { RiDeleteBack2Line } from \"react-icons/ri\"\n\nconst Wrapper = styled(motion.div)`\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  backdrop-filter: blur(8px) contrast(1.5) brightness(0.6);\n  z-index: 1;\n  color: black;\n  opacity: 0;\n  position: relative;\n`;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  max-width: 100%;\n  align-items: center;\n  position: relative;\n  max-width: 100%;\n  min-height: 0;\n  overflow: hidden;\n  cursor: pointer;\n  padding-top: 35px;\n\n  & > img {\n    overflow: hidden;\n    object-fit: contain;\n    width: 5vh;\n    border-radius: 50%;\n    max-width: 50px;\n    max-height: 50px;\n  }\n\n`;\n\nconst CancelButton = styled.img`\n\n  margin-left: 19px;\n\n`;\n\nconst PasscodeInputWrapper = styled.div`\n  display: grid;\n  margin: 0 20%;\n\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-auto-rows: 1fr;\n  grid-row-gap: 5%;\n  grid-column-gap: 10%;\n\n  & > button {\n    background-color: lightgrey;\n    backdrop-filter: brightness(2);\n    border: none;\n    color: black;\n    border-radius: 50%;\n    align-self: center;\n    justify-self: center;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n    user-select: none;\n\n    :nth-child(2) {\n      grid-row: 1;\n      grid-column: 1;\n    }\n\n    :hover {\n      backdrop-filter: brightness(2.5) opacity(0.5);\n    }\n\n    :focus {\n      outline: none;\n      border: none;\n    }\n  }\n\n  & > .phoneIcon {\n    background: limegreen;\n  }\n\n  & > .hangUpIcon {\n    background: orangered;\n  }\n\n  & > .deleteButton {\n    background-image: url(./icons/cancel_button.png);\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: 100%;\n    background-color: transparent;\n  }\n\n  & > .clearButton {\n    background: transparent;\n  }\n`;\n\nconst PhoneInputView = styled.div`\n  display: flex;\n  flex-direction: column;\n  max-width: 100%;\n  align-items: center;\n  position: relative;\n  max-width: 100%;\n  min-height: 100px;\n  overflow: hidden;\n  cursor: pointer;\n  justify-content: center;\n`;\n\nfunction sound(src, loop = false) {\n  this.sound = document.createElement(\"audio\");\n  this.sound.src = src;\n  this.sound.setAttribute(\"preload\", \"auto\");\n  this.sound.setAttribute(\"controls\", \"none\");\n  this.sound.style.display = \"none\";\n  this.sound.loop = loop\n  document.body.appendChild(this.sound);\n  this.play = function(){\n    this.sound.play();\n  }\n  this.stop = function(){\n    this.sound.pause();\n  }\n}\n\nvar phoneTimeout;\nvar phoneInterval;\nconst phoneDial = new sound(\"./audio/phone_dial.mp3\");\nconst morseCode = new sound(\"./audio/morse_code.wav\", true);\nvar timer = 0;\n\nexport default function PhoneView(props) {\n  const [inputValue, setInputValue] = useState(\"\");\n  const [callStatus, setCallStatus] = useState(\"\");\n  const [isCalling, setIsCalling] = useState(false)\n  const [callSucceeded, setCallSucceeded] = useState(false)\n\n  React.useEffect(() => {\n    return () => {\n      hangUp();\n    };\n  }, [props.current]);\n\n  const handlePhoneInput = (event, char) => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    setCallStatus(\"\")\n    setInputValue((prevVal) => {\n\n      if (prevVal.length == 12) {\n        return prevVal;\n      }\n\n      if (prevVal.length == 3 || prevVal.length == 7) {\n        prevVal += \"-\"\n      }\n      console.log(char)\n      return prevVal + char.toString();\n\n    });\n  };\n\n  const deletePhoneInput = () => {\n    setCallStatus(\"\")\n    setInputValue((prevVal) => {\n      return prevVal.slice(0, -1)\n    });\n  }\n\n\n  const successfulCall = () => {\n    setCallSucceeded(true)\n    morseCode.play();\n    incrementTimer()\n    phoneInterval = setInterval(incrementTimer, 1000)\n  }\n\n  const incrementTimer = () => {\n\n    var minutes = Math.floor(timer/60)\n    var seconds = timer%60\n    var minutesString = \"\"\n    var secondsString = \"\"\n    if (minutes < 10) {\n        minutesString = \"0\"\n    }\n    minutesString += minutes\n\n    if (seconds < 10) {\n      secondsString = \"0\"\n    }\n    secondsString += seconds\n\n    setCallStatus(minutesString + \":\" + secondsString)\n    timer +=1\n  }\n\n  const hangUp = () => {\n    setCallSucceeded(false)\n    setIsCalling(false)\n    clearInterval(phoneInterval)\n    clearTimeout(phoneTimeout)\n    setCallStatus(\"Call ended\")\n    timer = 0;\n    //stop all audio files\n    phoneDial.stop()\n    morseCode.stop()\n    console.log(\"hanging up\")\n  }\n\n  const call = () => {\n    phoneDial.stop();\n    phoneDial.play();\n    clearTimeout(phoneTimeout)\n    setCallStatus(\"Calling...\")\n    setIsCalling(true)\n\n    phoneTimeout = setTimeout(function() {\n      phoneDial.stop();\n      if (inputValue == \"519-745-2222\") {\n        //number called\n        successfulCall()\n      } else {\n        setCallStatus(\"Call failed\")\n        setIsCalling(false)\n      }\n    }, 6000)\n  }\n\n  const phoneInputs = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '*', '0', '#']\n  return (\n    <Wrapper\n      initial={{ scale: 0, opacity: 0 }}\n      animate={{ scale: 1, opacity: 1 }}\n      exit={{ scale: 0, opacity: 0 }}\n      key=\"map-container\"\n    >\n      <StatusBar />\n\n      <PhoneInputView>\n        <center>{inputValue}</center>\n        <center>{callStatus}</center>\n      </PhoneInputView>\n\n\n      <PasscodeInputWrapper>\n        <div\n          style={{\n            gridRow: \"1\",\n            gridColumn: \"1\",\n            width: 0,\n            paddingBottom: \"100%\",\n          }}\n        />\n        {phoneInputs.map((e, i) => (\n          <button key={i} onClick={(event)=>{handlePhoneInput(event, phoneInputs[i])}}>{phoneInputs[i]}</button>\n        ))}\n        <button className=\"clearButton\"></button>\n        {!isCalling&&<button className=\"phoneIcon\" onClick={()=>{call()}}><ImPhone color=\"white\" /></button>}\n        {isCalling&&<button className=\"hangUpIcon\" onClick={()=>{hangUp()}}><ImPhoneHangUp color=\"white\" /></button>}\n        <button className=\"deleteButton\" onClick={()=>{deletePhoneInput()}}></button>\n      </PasscodeInputWrapper>\n\n    </Wrapper>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}